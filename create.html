<!DOCTYPE html>
<html>
<head>
<title>İlan Oluştur</title>
<script src="api.js"></script>
</head>
<body>

<h1>Yeni İlan</h1>

<input id="title" placeholder="Başlık">
<input id="price" placeholder="Fiyat">
<input id="category" placeholder="Kategori">
<input id="type" placeholder="Tip">
<textarea id="description" placeholder="Açıklama"></textarea>

<input type="file" id="imageFile">
<button onclick="send()">Gönder</button>

<script>
async function send() {
    const token = localStorage.token;
    if (!token) return alert("Giriş yapın!");

    const file = document.getElementById("imageFile").files[0];
    const formData = new FormData();

    formData.append("title", title.value);
    formData.append("price", price.value);
    formData.append("category", category.value);
    formData.append("type", type.value);
    formData.append("description", description.value);
    if (file) formData.append("image", file);

    const res = await fetch(API_BASE + "/api/listings", {
        method: "POST",
        headers: { "Authorization": "Bearer " + token },
        body: formData
    });

    const data = await res.json();

    alert("Gönderildi!");
}
</script>

</body>
</html>